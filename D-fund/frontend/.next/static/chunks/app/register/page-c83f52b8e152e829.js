(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{939:function(e,t,r){Promise.resolve().then(r.bind(r,2833))},8662:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return i},a:function(){return l}});var n=r(7437),a=r(2265),o=r(1933);let s=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,a.useState)(null),[l,u]=(0,a.useState)(!0),c=async()=>{if(!(0,o.bW)()){i(null),u(!1);return}try{let e=await (0,o.yw)("/auth/me");i(e)}catch(e){console.error("Failed to refresh user:",e),(0,o.H6)(),i(null)}finally{u(!1)}};return(0,a.useEffect)(()=>{c()},[]),(0,n.jsx)(s.Provider,{value:{user:r,loading:l,login:(e,t)=>{i(t)},logout:()=>{(0,o.H6)(),i(null)},refreshUser:c},children:t})}function l(){let e=(0,a.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1933:function(e,t,r){"use strict";r.d(t,{H6:function(){return i},bW:function(){return o},uB:function(){return s},yw:function(){return u}});var n=r(257);let a=()=>n.env.NEXT_PUBLIC_API_URL||"http://localhost:3001/api/v1",o=()=>localStorage.getItem("auth_token"),s=e=>{localStorage.setItem("auth_token",e)},i=()=>{localStorage.removeItem("auth_token")},l=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a(),n=o(),s={"Content-Type":"application/json",...t.headers};return n&&(s.Authorization="Bearer ".concat(n)),await fetch("".concat(r).concat(e),{...t,headers:s})},u=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=await l(e,t);if(!r.ok){let e=await r.json().catch(()=>({error:"Erreur inconnue"}));throw Error(e.error||e.message||"HTTP ".concat(r.status))}return r.json()}},2833:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var n=r(7437),a=r(2265),o=r(9376),s=r(7648),i=r(1933),l=r(8662);function u(){let e=(0,o.useRouter)(),{login:t}=(0,l.a)(),[r,u]=(0,a.useState)({firstName:"",lastName:"",email:"",password:""}),[c,d]=(0,a.useState)(""),[f,m]=(0,a.useState)(!1),h=async n=>{n.preventDefault(),d(""),m(!0);try{let n={...r,name:"".concat(r.firstName," ").concat(r.lastName).trim(),role:"USER"},a=await (0,i.yw)("/auth/register",{method:"POST",body:JSON.stringify(n)});a.token&&((0,i.uB)(a.token),t(a.token,a.user)),e.push("/login?registered=true")}catch(e){d(e instanceof Error?e.message:"Une erreur est survenue")}finally{m(!1)}};return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-sm border border-gray-100",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"mx-auto h-12 w-12 bg-[#3b49df] rounded-lg flex items-center justify-center text-white text-2xl font-bold mb-4",children:"D"}),(0,n.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Create Account"}),(0,n.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Join the D-fund Platform ecosystem"})]}),(0,n.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:h,children:[c&&(0,n.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:c}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,n.jsx)("input",{id:"firstName",name:"firstName",type:"text",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-lg placeholder-gray-400 text-gray-900 focus:outline-none focus:ring-[#3b49df] focus:border-[#3b49df] sm:text-sm transition-all",placeholder:"John",value:r.firstName,onChange:e=>u({...r,firstName:e.target.value})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,n.jsx)("input",{id:"lastName",name:"lastName",type:"text",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-lg placeholder-gray-400 text-gray-900 focus:outline-none focus:ring-[#3b49df] focus:border-[#3b49df] sm:text-sm transition-all",placeholder:"Doe",value:r.lastName,onChange:e=>u({...r,lastName:e.target.value})})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,n.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-lg placeholder-gray-400 text-gray-900 focus:outline-none focus:ring-[#3b49df] focus:border-[#3b49df] sm:text-sm transition-all",placeholder:"you@example.com",value:r.email,onChange:e=>u({...r,email:e.target.value})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,n.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-lg placeholder-gray-400 text-gray-900 focus:outline-none focus:ring-[#3b49df] focus:border-[#3b49df] sm:text-sm transition-all",placeholder:"••••••••",value:r.password,onChange:e=>u({...r,password:e.target.value})})]})]}),(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsx)("div",{className:"text-sm",children:(0,n.jsx)(s.default,{href:"/login",className:"font-medium text-[#3b49df] hover:text-[#2d3aba]",children:"Already have an account? Sign In"})})}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"submit",disabled:f,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-bold rounded-lg text-white bg-[#3b49df] hover:bg-[#2d3aba] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#3b49df] disabled:opacity-50 transition-all shadow-sm",children:f?"Creating account...":"Create Account"})})]})]})})}},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var n=r(2972),a=r.n(n)},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},257:function(e,t,r){"use strict";var n,a;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(a=r.g.process)?void 0:a.env)?r.g.process:r(4227)},4227:function(e){!function(){var t={229:function(e){var t,r,n,a=e.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l=[],u=!1,c=-1;function d(){u&&n&&(u=!1,n.length?l=n.concat(l):c=-1,l.length&&f())}function f(){if(!u){var e=i(d);u=!0;for(var t=l.length;t;){for(n=l,l=[];++c<t;)n&&n[c].run();c=-1,t=l.length}n=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new m(e,t)),1!==l.length||u||i(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=h,a.addListener=h,a.once=h,a.off=h,a.removeListener=h,a.removeAllListeners=h,a.emit=h,a.prependListener=h,a.prependOnceListener=h,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var o=r[e]={exports:{}},s=!0;try{t[e](o,o.exports,n),s=!1}finally{s&&delete r[e]}return o.exports}n.ab="//";var a=n(229);e.exports=a}()}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=939)}),_N_E=e.O()}]);