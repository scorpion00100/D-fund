(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[442],{1970:function(e,t,r){Promise.resolve().then(r.bind(r,555))},555:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(7437),a=r(2265),i=r(1713),s=r(1933),l=r(8662),o=r(1723),c=r(5302);let u=(0,r(9763).Z)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var d=r(3247),x=r(740),f=r(7648);function p(){let{user:e}=(0,l.a)(),[t,r]=(0,a.useState)("ALL"),[f,p]=(0,a.useState)(""),{data:m,isLoading:y}=(0,i.a)({queryKey:["my-applications-full",null==e?void 0:e.id],queryFn:()=>(0,s.yw)("/applications/user/".concat(null==e?void 0:e.id)),enabled:!!(null==e?void 0:e.id)});if(!e)return(0,n.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,n.jsx)("p",{className:"text-gray-500 text-sm",children:"Please sign in to view your applications."})});let g=(null==m?void 0:m.filter(e=>{var r;return("ALL"===t||e.stage===t)&&(!f||"".concat(e.title||""," ").concat((null===(r=e.opportunity)||void 0===r?void 0:r.name)||"").toLowerCase().includes(f.toLowerCase()))}))||[];return(0,n.jsxs)("div",{className:"container mx-auto px-6 py-8 max-w-5xl",children:[(0,n.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"My Applications"}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Draft, submit and track your applications to D-fund opportunities."})]})}),(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[(0,n.jsx)("div",{className:"flex gap-4 border-b border-gray-200 text-sm",children:[{id:"ALL",label:"All"},{id:"DRAFT",label:"Draft",icon:o.Z},{id:"SUBMITTED",label:"Submitted"},{id:"OWNER_REVIEW",label:"In review"},{id:"SUCCESS",label:"Success",icon:c.Z},{id:"ARCHIVED",label:"Archived",icon:u}].map(e=>{let{id:a,label:i,icon:s}=e;return(0,n.jsxs)("button",{onClick:()=>r(a),className:"pb-3 px-1 border-b-2 font-semibold flex items-center gap-1 ".concat(t===a?"border-[#3b49df] text-[#3b49df]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[s&&(0,n.jsx)(s,{className:"w-4 h-4"}),i]},a)})}),(0,n.jsxs)("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[(0,n.jsxs)("div",{className:"relative flex-1 md:w-64",children:[(0,n.jsx)(d.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,n.jsx)("input",{type:"text",placeholder:"Search applications",className:"w-full pl-10 pr-4 py-2 bg-gray-100 rounded-lg border-none text-sm focus:ring-2 focus:ring-[#3b49df]",value:f,onChange:e=>p(e.target.value)})]}),(0,n.jsxs)("button",{className:"hidden md:inline-flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50",children:[(0,n.jsx)(x.Z,{className:"w-4 h-4"}),"Filters"]})]})]}),(0,n.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 divide-y divide-gray-100",children:y?Array.from({length:5}).map((e,t)=>(0,n.jsx)("div",{className:"h-20 bg-gray-50 animate-pulse"},t)):g.length?g.map(e=>(0,n.jsx)(h,{app:e},e.id)):(0,n.jsx)("div",{className:"py-8 text-center text-gray-500 text-sm",children:"No applications match your filters."})})]})}function h(e){var t;let{app:r}=e,a={DRAFT:"bg-gray-100 text-gray-600",SUBMITTED:"bg-blue-50 text-blue-700",OWNER_REVIEW:"bg-purple-50 text-purple-700",SUCCESS:"bg-green-50 text-green-700",ARCHIVED:"bg-gray-50 text-gray-500"}[r.stage]||"bg-gray-100 text-gray-600";return(0,n.jsx)(f.default,{href:"/applications/".concat(r.id),className:"flex items-center justify-between px-5 py-4 hover:bg-gray-50 transition-colors",children:(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-semibold ".concat(a),children:r.stage}),(0,n.jsx)("span",{className:"text-xs text-gray-400",children:r.submissionDate?new Date(r.submissionDate).toLocaleDateString("fr-FR"):"Draft"})]}),(0,n.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:(null===(t=r.opportunity)||void 0===t?void 0:t.name)||"Untitled opportunity"}),(0,n.jsx)("div",{className:"text-xs text-gray-500",children:r.title||"No headline yet"})]})})}},8662:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return l},a:function(){return o}});var n=r(7437),a=r(2265),i=r(1933);let s=(0,a.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,a.useState)(null),[o,c]=(0,a.useState)(!0),u=async()=>{if(!(0,i.bW)()){l(null),c(!1);return}try{let e=await (0,i.yw)("/auth/me");l(e)}catch(e){console.error("Failed to refresh user:",e),(0,i.H6)(),l(null)}finally{c(!1)}};return(0,a.useEffect)(()=>{u()},[]),(0,n.jsx)(s.Provider,{value:{user:r,loading:o,login:(e,t)=>{l(t)},logout:()=>{(0,i.H6)(),l(null)},refreshUser:u},children:t})}function o(){let e=(0,a.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1933:function(e,t,r){"use strict";r.d(t,{H6:function(){return l},bW:function(){return i},uB:function(){return s},yw:function(){return c}});var n=r(257);let a=()=>n.env.NEXT_PUBLIC_API_URL||"http://localhost:3001/api/v1",i=()=>localStorage.getItem("auth_token"),s=e=>{localStorage.setItem("auth_token",e)},l=()=>{localStorage.removeItem("auth_token")},o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a(),n=i(),s={"Content-Type":"application/json",...t.headers};return n&&(s.Authorization="Bearer ".concat(n)),await fetch("".concat(r).concat(e),{...t,headers:s})},c=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=await o(e,t);if(!r.ok){let e=await r.json().catch(()=>({error:"Erreur inconnue"}));throw Error(e.error||e.message||"HTTP ".concat(r.status))}return r.json()}},5302:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1723:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},740:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},3247:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var n=r(2972),a=r.n(n)}},function(e){e.O(0,[972,763,713,971,117,744],function(){return e(e.s=1970)}),_N_E=e.O()}]);